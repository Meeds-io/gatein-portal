
  /* !

  * vue-ellipsis v1.2.0

  * https://github.com/jypblue/vue-ellipsis

  * Released under the MIT License. 

  * 

  */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.VueEllipsis=n()}(this,function(){"use strict";function e(n){e.installed||n.component("ellipsis",{props:{data:{type:String,default:""},lineClamp:{type:Number,default:1},lineHeight:{type:String,default:"22px"},endChar:{type:String,default:"..."},endHtml:{type:String,default:""},delayTime:{type:Number,default:20}},methods:{handleSubstrSentence:function(){var e=this.$refs.sentence,n=this.data;if(0===n.length)return console.log("the String is empty"),!1;if(!e)return console.warn("can not get this dom"),!1;e.innerHTML=n;var t=0,i=n.length,l=e.getBoundingClientRect().height||22,h=this.lineHeight.slice(0,this.lineHeight.length-2),r=h*this.lineClamp;if(l>r){for(;Math.abs(i-t)>1;){var s=Math.ceil((i+t)/2),d=n.substring(0,s);e.innerHTML=d,l=e.getBoundingClientRect().height||22,l<=r?t=s:i=s}for(;l>r;){var o=e.innerHTML.substring(0,e.innerHTML.trimRight().length-1);e.innerHTML=o,l=e.getBoundingClientRect().height||22}var a=this.endHtml?this.endHtml.replace(/<[^>]+>/g,""):"",u="..."===this.endChar?3:a.length+this.endChar.length,c=e.innerHTML.trimRight().length,g=e.innerHTML.substring(c-u,c),f=g.match(/\s+/g),m=f&&f.length?f.length:0,p=e.innerHTML.substring(0,c-u-m)+this.endChar+this.endHtml;e.innerHTML=p}},handleClick:function(e){this.$emit("click",e)},onWindowResize:function(){var e=this;window.onresize=function(){setTimeout(function(){e.handleSubstrSentence()},e.delayTime||0)}}},watch:{data:{immediate:!0,deep:!0,handler:function(e){var n=this;this.$nextTick(function(){n.handleSubstrSentence()})}}},mounted:function(){this.onWindowResize()},template:'\n    <div ref="sentence" @click="handleClick"></div>\n    '})}return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});